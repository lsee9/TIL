###### 210331_wed

##### Model Relationship 3

# LIKE

> 좋아요 기능을 구현합시다!!!!!
>
> 파일은 210331_wed/08_se_practice 입니다

#### Article과 User의 관계 (M : N)

- Article : 여러개의 user의 좋아요가 생성될 수 있다
- User : 여러 article의 좋아요를 누를 수 있다

##### :heavy_check_mark: 현재 Article이 FK를 가지고 있으므로, Article이 MTM을 갖는 방향으로 작성하겠습니다!

<br>

#### 초기설정

- 가상환경

```shell
$ python -m venv venv
$ source venv/Scrips/activate
```

- 프로그램 설치

```shell
$ pip install -r requirements.txt
```

<br>

## Model

> 인스턴스 이름은 알아보기 쉽도록!!
>
> user자체는 권장하지 않습니다!

- articles/models.py
  - ManyToManyField
  - instance_name
    - like_users
    - 복수형 (관계형 데이터가 많아졌을 때 구분 가능)

```python
from django.db import models
from django.conf import settings

class Article(models.Model):
    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)
    #### MTM으로 유저 참조
    like_users = models.ManyToManyField(settings.AUTH_USER_MODEL)
    ####
    title = models.CharField(max_length=10)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    def __str__(self):
        return self.title
```

- migrations

```shell
$ python manage.py makemigrations
```

#### :fire: Error 

##### 기존 역참조와 충돌

> ERRORS:
> articles.Article.like_users: (fields.E304) `Reverse accessor` for 'Article.like_users' `clashes` with reverse accessor for 'Article.user'.
>      HINT: Add or change a related_name argument to the definition for 'Article.like_users' or 'Article.user'.
> articles.Article.user: (fields.E304) Reverse accessor for 'Article.user' clashes 
> with reverse accessor for 'Article.like_users'.
>      HINT: Add or change a related_name argument to the definition for 'Article.user' or 'Article.like_users'.

#### :mag_right: Why?

##### 기존

