###### Jan_3weeks_Day3_210120_wed



# 함수(function)2

> 함수의 스코프와 재귀함수에 대해 학습하겠습니다.



# 1.함수와 스코프(scope)

> 함수는 코드 내부에 공간(scope)를 생성합니다. 함수로 생성된 공간은 __지역스코프(local scope)__라고 불리며, 그 외의 공간인 __전역 스코프(global scope)__와 구분됩니다. 이에따라 함수의 내부와 외부에 정의된 변수를 다르게 부릅니다.

- 전역 스코프(global scope) : 코드가 어디있든 참고할 수 있는 공간
- 지역 스코프(local scope) : 함수가 만든 스코프, 함수 내부에서만 참조할 수 있는 공간

- 전역 변수(global variable) : 전역 스코프에 정의된 변수
- 지역 변수(local variable) : 로컬 스코프에 정의된 변수 

```python
#전역 스코프입니다.
x = 1  #전역 변수입니다.

def func(y):
    #지역 스코프입니다.
    z = 3  #지역변수 입니다.
    print(x)  #1
    print(y)  #2
    print(z)  #3

func(2)
print(x)  #1
print(y)  #error, not defined
print(z)  #error, not defined
```

- 지역 스코프: 지역 변수, 전역 변수 모두 호출 가능
- 전역 스코프: 전역변수만 호출 가능



## 1.1 이름 검색(resolution) 규칙

> 그렇다면 지역 스코프와 전역 스코프에 같은 이름의 변수가 있다면 무엇이 호출될까요? 이는 이름 검색 규칙을 알면 확인할 수 있습니다.
>
> 파이썬에서 사용되는 이름(식별자)들은 이름공간(namespace)에 저장되어 있습니다.
>
>  __LEGB Rule__을 따라 아래와 같은 순서로 이름을 찾아갑니다.
>
> > - `L`ocla scope: 정의된 함수 내부
> > - `E`nclosed scope: 상위 함수(함수 밖의 함수)
> > - `G`lobal scope: 함수 밖의 변수 혹은 import된 모듈
> > - `B`uilt-in scope: 파이썬안에 내장되어 있는 함수 또는 속성
>
> 즉, Local에서 먼저 찾은 뒤 없으면 E, G, B를 하나하나 탐색하는 방식으로, 더 넓은 지역으로 탐색하는 과정입니다.

```python
#Global scope
a = 1
def func_enclosed():
    #Enclosed scope(func_local 입장)
    a = 2
    b = 2
    def func_local():
        #local scope
        c = 3
        print(a, b, c)  #2, 2, 3
    func_local()
    print(a, b)  #2, 2
    print(c)  #NameError
func_enclosed()
```

- 전역 스코프와 지역스코프에 동일한 이름의 변수가 있는 경우

```python
#전역 스코프(G)
x = 1  

def func(y):
    #지역 스코프(L)
    z = 3 
    x = 4
    print(x)  #4, L을 가장 먼저 탐색하며 이때 x가 존재하면 탐색을 종료합니다.  

func(2)
```

- 내장함수의 식별자를 변수 이름으로 사용할 수 없는 이유도 설명할 수 있습니다.

```python
print('hi')  #Built-in
print = 'hello'  #Global scope에서 정의
print('hola')  #Error, print의 이름을 G에서 찾으면 탐색을 중지하므로 B에 정의된 함수를 호출할 수 없습니다.
```

- 스코프는 __함수__를 기준으로 만들어집니다. (for, if 등은 scope를 만들지 않습니다.)
- 지역 스코프에서 전역 변수를 변경할 수 있습니다.
  - 이때 local에 동일한 이름의 변수는 없어야합니다.

```python
a = 1
def func():
    global a  #이 다음부터 나오는 a는 전역 변수인 a입니다.
    a = 3
func()  #함수가 실행되면
print(a)  #3
```

- global의 사용은 권장하지 않습니다.
  - 예기치 못한 오류가 발생할 수 있습니다.
  - 각 변수는 수명주기가 있고, 이에 맞게 코딩하는 것을 권장합니다.



### 1.1.1 변수의 수명주기(lifecycle)

> 우리가 정의한 변수는 언제까지 유효할까요?
>
> 실제로 변수의 이름은 각자의 __수명주기(lifecycle)__가 있습니다.
>
> > - 빌트인 스코프(`built-in scope`) : 파이썬이 __실행된 이후부터 영원히__ 유지
> > - 전역 스코프(`global scope`) : __모듈이 호출된 시점 이후__ or 이름 __선언된 이후부터 인터프리터가 끝날때__ 까지 유지
> > - 지역 스코프(`local scope`) : __함수가 호출될 때 생성되고, 함수가 종료될 때__까지 유지
> >   - 함수내에서 처리되지 않는 예외를 일으킬 때 삭제됩니다. (오류발생하는 상황/어쨌든 함수가 종료되면 사라집니다.)



# 2. 재귀 함수(recursive function)

> 재귀, 포인터, opp/class를 프로그래민 3대장이라고 할 수 있습니다. 추상적이라 처음 접한다면 많이 헷갈리는 부분입니다. 이 중 재귀에 대해 알아봅시다.
>
> 재귀 함수는 함수 내부에서 자기 자신을 호출하는 함수를 뜻합니다. ~~(실제로 구글에 검색하면 재귀함수를 직접 경험할 수 있습니다ㅎㅎ)~~
>
> 이는 알고리즘 설계 및 구현에 유용하게 활용됩니다. 
>
> 직접 그림을 그려보면 보다 더 빠르게 이해할 수 있습니다. 또한 활용이 어려운 편이니 관련된 알고리즘을 접하면서 연습을 거듭해야할 것입니다. 

## 2.1 팩토리얼 계산

> 팩토리얼은 1부터 n 까지 양의 정수를 차례대로 곱한 값이며 `!` 기호로 표기합니다. 예를 들어 3!은 3 * 2 * 1이며 결과는 6 입니다.
>
> `팩토리얼(factorial)`을 계산하는 함수 `fact(n)`를 작성하세요.
>
> n은 1보다 큰 정수라고 가정하고, 팩토리얼을 계산한 값을 반환합니다.

### 2.1.1반복문을 사용한 팩토리얼 계산



### 2.1.2 재귀를 이용한 팩토리얼 계산



## 2.2 반복문과 재귀함수





### 2.2.1 최대 재귀 깊이





## 2.3 피보나치 수열





## 2.4 반복문과 재귀 함수의 차이

